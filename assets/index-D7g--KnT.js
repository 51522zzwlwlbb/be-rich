var ee=Object.defineProperty,oe=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var F=(n,e,o)=>e in n?ee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,v=(n,e)=>{for(var o in e||(e={}))ne.call(e,o)&&F(n,o,e[o]);if(Y)for(var o of Y(e))le.call(e,o)&&F(n,o,e[o]);return n},W=(n,e)=>oe(n,te(e));var I=(n,e,o)=>new Promise((i,_)=>{var f=u=>{try{l(o.next(u))}catch(g){_(g)}},t=u=>{try{l(o.throw(u))}catch(g){_(g)}},l=u=>u.done?i(u.value):Promise.resolve(u.value).then(f,t);l((o=o.apply(n,e)).next())});import{K as G,d as j,L as se,r as T,M as V,O as q,E as ae,Q as ce,w as c,S as ue,T as ie,h as m,U as re,o as z,i as a,k as M,t as $,V as E,a as U,B as K,H as Q,W as de,X as pe,u as fe,c as me,s as _e,Y as ge,Z as be,l as he}from"./index-BK0dny1c.js";import{t as ye}from"./index-DT-bYAj6.js";import{B as Me}from"./BasicForm-FtJeeHS5.js";import{u as ve}from"./useForm-DhdxZ06U.js";import"./propTypes-CZaZbMOe.js";import"./DownOutlined-CHzrw5k8.js";const ke=W(v({},G.props),{subBtuText:{type:String,default:"确认"},showIcon:{type:Boolean,default:!1},width:{type:Number,default:446},title:{type:String,default:""},maskClosable:{type:Boolean,default:!1},preset:{type:String,default:"dialog"}}),k=function(n,e){var o;return n.currentStyle?n.currentStyle[e]:(o=document.defaultView)==null?void 0:o.getComputedStyle(n,null)[e]},r={left:0,top:0,currentX:0,currentY:0,flag:!1},Pe=function(n,e,o){const i=document.body.clientWidth,_=document.documentElement.clientHeight,f=e.offsetWidth,t=e.offsetHeight,l=e.offsetLeft,u=e.offsetTop,g=i-l-f,w=_-u-t;k(e,"left")!=="auto"&&(r.left=k(e,"left")),k(e,"top")!=="auto"&&(r.top=k(e,"top")),n.onmousedown=function(d){r.flag=!0,d||(d=window.event,n.onselectstart=function(){return!1});const b=d;r.currentX=b.clientX,r.currentY=b.clientY},document.onmouseup=function(){r.flag=!1,k(e,"left")!=="auto"&&(r.left=k(e,"left")),k(e,"top")!=="auto"&&(r.top=k(e,"top"))},document.onmousemove=function(d){const b=d||window.event;if(r.flag){const x=b.clientX,C=b.clientY,B=x-r.currentX,D=C-r.currentY;let y=parseInt(r.left)+B,h=parseInt(r.top)+D;return-y>l?y=-l:y>g&&(y=g),-h>u?h=-u:h>w&&(h=w),e.style.left=y+"px",e.style.top=h+"px",d.preventDefault&&d.preventDefault(),!1}}},we={class:"w-full cursor-move",id:"basic-modal-bar"},H=j({__name:"basicModal",props:v({},ke),emits:["on-close","on-ok","register"],setup(n,{expose:e,emit:o}){const i=se(),_=n,f=o,t=T(null),l=T(!1),u=T(!1),g=V(()=>v(v({},_),m(t))),w=V(()=>{const{subBtuText:p}=t.value;return p||_.subBtuText});function d(p){return I(this,null,function*(){t.value=ie(m(t)||{},p)})}const b=V(()=>v(v(v({},i),m(g)),m(t)));function x(p){u.value=p}function C(){l.value=!0,re(()=>{const p=document.getElementById("basic-modal"),P=document.getElementById("basic-modal-bar");Pe(P,p)})}function B(){l.value=!1,u.value=!1,f("on-close")}function D(){l.value=!1,f("on-close")}function y(){u.value=!0,f("on-ok")}const h={setProps:d,openModal:C,closeModal:B,setSubLoading:x};return q()&&f("register",h),e(h),(p,P)=>{const S=K,R=Q,L=G;return z(),ae(L,ue({id:"basic-modal"},b.value,{show:l.value,"onUpdate:show":P[0]||(P[0]=N=>l.value=N),onClose:D}),ce({header:c(()=>[U("div",we,$(b.value.title),1)]),default:c(()=>[E(p.$slots,"default")]),_:2},[p.$slots.action?{name:"action",fn:c(()=>[E(p.$slots,"action")]),key:"1"}:{name:"action",fn:c(()=>[a(R,null,{default:c(()=>[a(S,{onClick:B},{default:c(()=>[M("取消")]),_:1}),a(S,{type:"primary",loading:u.value,onClick:y},{default:c(()=>[M($(w.value),1)]),_:1},8,["loading"])]),_:1})]),key:"0"}]),1040,["show"])}}});function A(n){const e=T(null),o=q(),i=()=>{const t=m(e.value);return t||console.error("useModal instance is undefined!"),t};return[t=>{ye(()=>{e.value=null}),e.value=t,o==null||o.emit("register",t),de(()=>n,()=>{n&&t.setProps(pe(n))},{immediate:!0,deep:!0})},{setProps:t=>{var l;(l=i())==null||l.setProps(t)},openModal:()=>{var t;(t=i())==null||t.openModal()},closeModal:()=>{var t;(t=i())==null||t.closeModal()},setSubLoading:t=>{var l;(l=i())==null||l.setSubLoading(t)}}]}const Be={class:"n-layout-page-header"},Se=U("br",null,null,-1),Re=U("p",{class:"text-gray-500",style:{"padding-left":"35px"}},"一些对话框内容",-1),Ie=j({__name:"index",setup(n){const e=[{field:"name",component:"NInput",label:"姓名",labelMessage:"这是一个提示",giProps:{span:1},componentProps:{placeholder:"请输入姓名",onInput:s=>{console.log(s)}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:s=>{console.log(s)}}},{field:"type",component:"NSelect",label:"类型",giProps:{},componentProps:{placeholder:"请选择类型",options:[{label:"舒适性",value:1},{label:"经济性",value:2}],onUpdateValue:s=>{console.log(s)}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",giProps:{},defaultValue:118313526e4,componentProps:{type:"date",clearable:!0,onUpdateValue:s=>{console.log(s)}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",giProps:{},componentProps:{clearable:!0,onUpdateValue:s=>{console.log(s)}}},{field:"makeProject",component:"NCheckbox",label:"预约项目",giProps:{},componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:s=>{console.log(s)}}},{field:"makeSource",component:"NRadioGroup",label:"来源",giProps:{},componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:s=>{console.log(s)}}},{field:"status",label:"状态",giProps:{},slot:"statusSlot"}],o=T(null),i=fe(),[_,{openModal:f,closeModal:t,setSubLoading:l}]=A({title:"新增预约"}),[u,{openModal:g,closeModal:w,setSubLoading:d}]=A({title:"确认对话框",showIcon:!0,type:"warning",closable:!1,maskClosable:!0}),[b,{submit:x}]=ve({gridProps:{cols:1},collapsedRows:3,labelWidth:120,layout:"horizontal",submitButtonText:"提交预约",showActionButtonGroup:!1,schemas:e});function C(){return I(this,null,function*(){const s=yield x();s?(t(),console.log("formRes",s),i.success("提交成功")):(i.error("验证失败，请填写完整信息"),l(!1))})}function B(){w(),d(!1)}function D(){g()}function y(){f()}function h(s){console.log(s)}return(s,p)=>{const P=_e,S=ge,R=be,L=K,N=Q,Z=he;return z(),me("div",null,[U("div",Be,[a(P,{bordered:!1,title:"模态框"},{default:c(()=>[M(" 模态框，用于向用户收集或展示信息，Modal 采用 Dialog 预设，扩展拖拽效果 "),Se,M(" 以下是 useModal 方式，ref方式，也支持，使用方式和其他组件一致，如：modalRef.value.closeModal() ")]),_:1})]),a(P,{bordered:!1,class:"mt-4 proCard"},{default:c(()=>[a(S,{title:"Modal嵌套Form",type:"info"},{default:c(()=>[M(" 使用 useModal 进行弹窗展示和操作，并演示了在Modal内和Form组件，组合使用方法 ")]),_:1}),a(R),a(N,null,{default:c(()=>[a(L,{type:"primary",onClick:y},{default:c(()=>[M("打开Modal嵌套Form例子")]),_:1})]),_:1}),a(R),a(S,{title:"个性化轻量级",type:"info"},{default:c(()=>[M(" 使用 useModal 进行弹窗展示和操作，自定义配置，实现轻量级效果，更多配置，请参考文档 ")]),_:1}),a(R),a(N,null,{default:c(()=>[a(L,{type:"primary",onClick:D},{default:c(()=>[M("轻量级确认")]),_:1})]),_:1}),a(R),a(S,{title:"提示",type:"info"},{default:c(()=>[M(" 组件暴露了，setProps 方法，用于修改组件内部 Props，比如标题，等，具体参考UI框架文档，DialogReactive Properties ")]),_:1})]),_:1}),a(m(H),{onRegister:m(_),ref_key:"modalRef",ref:o,class:"basicModal",onOnOk:C},{default:c(()=>[a(m(Me),{onRegister:m(b),onReset:h,class:"basicForm"},{statusSlot:c(({model:O,field:X})=>[a(Z,{value:O[X],"onUpdate:value":J=>O[X]=J},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"])]),_:1},8,["onRegister"]),a(m(H),{onRegister:m(u),class:"basicModalLight",ref_key:"modalRef",ref:o,onOnOk:B},{default:c(()=>[Re]),_:1},8,["onRegister"])])}}});export{Ie as default};
