var $=(C,k,r)=>new Promise((w,d)=>{var D=o=>{try{c(r.next(o))}catch(v){d(v)}},f=o=>{try{c(r.throw(o))}catch(v){d(v)}},c=o=>o.done?w(o.value):Promise.resolve(o.value).then(D,f);c((r=r.apply(C,k)).next())});import{d as L,o as x,c as U,a as p,r as s,u as le,D as ae,M as oe,b as se,a1 as ue,aN as ce,i as e,w as t,s as ie,J as _e,k as i,h as _,t as N,E as H,at as re,aO as S,N as pe,B as de,aP as me,H as fe,l as ve,ax as ge,aQ as he,I as ye,Y as be,m as xe,an as ke,ao as we,_ as Te}from"./index-BK0dny1c.js";import{_ as ze}from"./CreateDrawer.vue_vue_type_script_setup_true_lang-Bt15Zw6y.js";import{D as Ce}from"./DownOutlined-CHzrw5k8.js";import{S as De}from"./SearchOutlined-CnzzDO7g.js";import{F as Me}from"./FormOutlined-Bso1rrPy.js";const Oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ne=p("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z",fill:"currentColor"},null,-1),Ue=[Ne],Be=L({name:"AlignLeftOutlined",render:function(k,r){return x(),U("svg",Oe,Ue)}}),Ie={class:"n-layout-page-header"},Ke={class:"flex items-center"},$e={class:"flex items-center"},He={class:"w-full menu"},Se={class:"py-3 menu-list"},Le={key:0,class:"flex items-center justify-center py-4"},qe=L({__name:"menu",setup(C){const k={label:{required:!0,message:"请输入标题",trigger:"blur"},path:{required:!0,message:"请输入路径",trigger:"blur"}},r=s(null),w=s(),d=le(),D=ae();let f=s([]),c=s([]);const o=s([]),v=s(!0),R=s(!1),M=s(!1),g=s(""),O=s(""),B=s(""),j=oe(()=>!f.value.length),A=s([{label:"添加顶级菜单",key:"home",disabled:!1},{label:"添加子菜单",key:"son",disabled:j}]),a=se({type:1,label:"",subtitle:"",path:"",auth:"",openType:1});function E(n){B.value=n==="home"?"添加顶栏菜单":`添加子菜单：${g.value}`,V()}function V(){const{openDrawer:n}=w.value;n()}function P(n){if(n.length){const l=S(_(o),n[0]);f.value=n,g.value=l.label,Object.assign(a,l),M.value=!0}else M.value=!1,f.value=[],g.value=""}function q(){D.info({title:"提示",content:"您确定想删除此权限吗?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{d.success("删除成功")},onNegativeClick:()=>{d.error("已取消")}})}function F(){const n=S(_(o),f.value[0]);Object.assign(a,n)}function J(){r.value.validate(n=>{n?d.error("请填写完整信息"):d.error("抱歉，您没有该权限")})}function Q(){c.value.length?c.value=[]:c.value=_(o).map(n=>n.key)}ue(()=>$(this,null,function*(){const n=yield ce(),l=n.list.map(h=>h.key);Object.assign(a,l),o.value=n.list,v.value=!1}));function Y(n){c.value=n}return(n,l)=>{const h=ie,T=pe,y=de,G=me,z=fe,b=ve,W=ge,X=he,I=ye,Z=be,m=xe,K=ke,ee=we,te=Te,ne=_e;return x(),U("div",null,[p("div",Ie,[e(h,{bordered:!1,title:"菜单权限管理"},{default:t(()=>[i(" 页面数据为 Mock 示例数据，非真实数据。 ")]),_:1})]),e(ne,{class:"mt-4",cols:"1 s:1 m:1 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12},{default:t(()=>[e(I,{span:"1"},{default:t(()=>[e(h,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(z,null,{default:t(()=>[e(G,{trigger:"hover",onSelect:E,options:A.value},{default:t(()=>[e(y,{type:"info",ghost:"","icon-placement":"right"},{icon:t(()=>[p("div",Ke,[e(T,{size:"14"},{default:t(()=>[e(_(Ce))]),_:1})])]),default:t(()=>[i(" 添加菜单 ")]),_:1})]),_:1},8,["options"]),e(y,{type:"info",ghost:"","icon-placement":"left",onClick:Q},{icon:t(()=>[p("div",$e,[e(T,{size:"14"},{default:t(()=>[e(_(Be))]),_:1})])]),default:t(()=>[i(" 全部"+N(_(c).length?"收起":"展开")+" ",1)]),_:1})]),_:1})]),default:t(()=>[p("div",He,[e(b,{type:"input",value:O.value,"onUpdate:value":l[0]||(l[0]=u=>O.value=u),placeholder:"输入菜单名称搜索"},{suffix:t(()=>[e(T,{size:"18",class:"cursor-pointer"},{default:t(()=>[e(_(De))]),_:1})]),_:1},8,["value"]),p("div",Se,[v.value?(x(),U("div",Le,[e(W,{size:"medium"})])):(x(),H(X,{key:1,"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,pattern:O.value,data:o.value,expandedKeys:_(c),style:{"max-height":"650px",overflow:"hidden"},"onUpdate:selectedKeys":P,"onUpdate:expandedKeys":Y},null,8,["pattern","data","expandedKeys"]))])])]),_:1})]),_:1}),e(I,{span:"2"},{default:t(()=>[e(h,{segmented:{content:!0},bordered:!1,size:"small"},{header:t(()=>[e(z,null,{default:t(()=>[e(T,{size:"18"},{default:t(()=>[e(_(Me))]),_:1}),p("span",null,"编辑菜单"+N(g.value?`：${g.value}`:""),1)]),_:1})]),default:t(()=>[e(Z,{type:"info",closable:""},{default:t(()=>[i(" 从菜单列表选择一项后，进行编辑")]),_:1}),M.value?(x(),H(te,{key:0,model:a,rules:k,ref_key:"formRef",ref:r,"label-placement":"left","label-width":100,class:"py-4"},{default:t(()=>[e(m,{label:"类型",path:"type"},{default:t(()=>[p("span",null,N(a.type===1?"侧边栏菜单":""),1)]),_:1}),e(m,{label:"标题",path:"label"},{default:t(()=>[e(b,{placeholder:"请输入标题",value:a.label,"onUpdate:value":l[1]||(l[1]=u=>a.label=u)},null,8,["value"])]),_:1}),e(m,{label:"副标题",path:"subtitle"},{default:t(()=>[e(b,{placeholder:"请输入副标题",value:a.subtitle,"onUpdate:value":l[2]||(l[2]=u=>a.subtitle=u)},null,8,["value"])]),_:1}),e(m,{label:"路径",path:"path"},{default:t(()=>[e(b,{placeholder:"请输入路径",value:a.path,"onUpdate:value":l[3]||(l[3]=u=>a.path=u)},null,8,["value"])]),_:1}),e(m,{label:"打开方式",path:"openType"},{default:t(()=>[e(ee,{value:a.openType,"onUpdate:value":l[4]||(l[4]=u=>a.openType=u),name:"openType"},{default:t(()=>[e(z,null,{default:t(()=>[e(K,{value:1},{default:t(()=>[i("当前窗口")]),_:1}),e(K,{value:2},{default:t(()=>[i("新窗口")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),e(m,{label:"菜单权限",path:"auth"},{default:t(()=>[e(b,{placeholder:"请输入权限，多个权限用，分割",value:a.auth,"onUpdate:value":l[5]||(l[5]=u=>a.auth=u)},null,8,["value"])]),_:1}),e(m,{path:"auth",style:{"margin-left":"100px"}},{default:t(()=>[e(z,null,{default:t(()=>[e(y,{type:"primary",loading:R.value,onClick:J},{default:t(()=>[i("保存修改")]),_:1},8,["loading"]),e(y,{onClick:F},{default:t(()=>[i("重置")]),_:1}),e(y,{onClick:q},{default:t(()=>[i("删除")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):re("",!0)]),_:1})]),_:1})]),_:1}),e(ze,{ref_key:"createDrawerRef",ref:w,title:B.value},null,8,["title"])])}}});export{qe as default};
